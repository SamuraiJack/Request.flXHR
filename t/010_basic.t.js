StartTest(function(t) {
    
    t.plan(5)
    
    var async1 = t.beginAsync()
    var async2 = t.beginAsync()

    
    use('Request.flXHR', function () {
        
        //===========================================================================================================================================================================================================
        t.diag('Sanity')
        
        t.ok(Request.flXHR, 'Request.flXHR is here')
        
        t.ok(flensed.flXHR, 'Native flXHR class was loaded')

        
        //===========================================================================================================================================================================================================
        t.diag('Instantiation')
        
        var newReq = new flensed.flXHR() 

        t.ok(newReq, 'flXHR class was instantiated')
        
        
        //===========================================================================================================================================================================================================
        //t.diag('Same-domain XHR request')
        
        var req1 = new Request.flXHR()
        req1.getText('http://catalyst-dev', function () {
            
            //===========================================================================================================================================================================================================
            t.diag('Same-domain XHR request')
            
            t.pass('Same-domain XHR was performed')
            
            t.endAsync(async1)
        })

        
        //===========================================================================================================================================================================================================
        //t.diag('Cross-domain XHR request')
        
        
        var req2 = new Request.flXHR()
        
        req2.getText('http://api.flickr.com/services/rest/', function () {
            
            //===========================================================================================================================================================================================================
            t.diag('Cross-domain XHR request')
            
            t.pass('Cross-domain XHR was performed')
            
            t.endAsync(async2)
        })
        

        
        
    })    
    
})    